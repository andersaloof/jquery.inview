(function(e){function a(){var t,n,r={height:s.innerHeight,width:s.innerWidth};if(!r.height){t=i.compatMode;if(t||!e.support.boxModel){n=t==="CSS1Compat"?o:i.body;r={height:n.clientHeight,width:n.clientWidth}}}return r}function f(){return{top:s.pageYOffset||o.scrollTop||i.body.scrollTop,left:s.pageXOffset||o.scrollLeft||i.body.scrollLeft}}function l(){var i=e(),s,u=0;e.each(t,function(e,t){var n=t.data.selector,r=t.$element;i=i.add(n?r.find(n):r)});s=i.length;if(s){n=n||a();r=r||f();for(;u<s;u++){if(!e.contains(o,i[u])){continue}var l=e(i[u]),c={height:l.height(),width:l.width()},h=l.offset(),p=l.data("inview"),d,v,m;if(!r||!n){return}if(h.top+c.height>r.top&&h.top<r.top+n.height&&h.left+c.width>r.left&&h.left<r.left+n.width){d=r.left>h.left?"right":r.left+n.width<h.left+c.width?"left":"both";v=r.top>h.top?"bottom":r.top+n.height<h.top+c.height?"top":"both";m=d+"-"+v;if(l.data("inview-percentage-x")||l.data("inview-percentage-y")){var g=parseInt(l.data("inview-percentage-x")||0,10)/100;var y=parseInt(l.data("inview-percentage-y")||0,10)/100;var b=Math.max(0,Math.min(h.left+c.width,r.left+n.width)-Math.max(h.left,r.left));var w=b/c.width;var E=Math.max(0,Math.min(h.top+c.height,r.top+n.height)-Math.max(h.top,r.top));var S=E/c.height;console.log(l.attr("id"),b,E);if(w>=g&&S>=y){if(!p||p!==m){l.data("inview",m).trigger("inview",[true,d,v])}}else if(p){l.data("inview",false).trigger("inview",[false])}}else{if(!p||p!==m){l.data("inview",m).trigger("inview",[true,d,v])}}}else if(p){l.data("inview",false).trigger("inview",[false])}}}}var t={},n,r,i=document,s=window,o=i.documentElement,u=e.expando;e.event.special.inview={add:function(n){t[n.guid+"-"+this[u]]={data:n,$element:e(this)}},remove:function(e){try{delete t[e.guid+"-"+this[u]]}catch(n){}}};e(s).bind("scroll resize",function(){n=r=null});if(!o.addEventListener&&o.attachEvent){o.attachEvent("onfocusin",function(){r=null})}setInterval(l,250)})(jQuery)